<div *ngIf="user" class="container">
  <div class="row">
    <div class="col-3">
      <div class="avatar-container">
        <img class="rounded-circle user-avatar border border-2 border-dark" [src]="user.avatar || '/assets/se.svg'"
             [alt]="user.name">
        <img class="rounded-circle level-icon border border-1 border-dark"
             [src]="'/assets/levels/' + (user.coffees | level) + '.png'"
             alt="Level Icon" [ngbTooltip]="user.coffees | level | levelName">
        <button class="btn btn-success" (click)="editMode = !editMode"
                ngbTooltip="Edit User">
          <span class="bi bi-pencil"></span>
        </button>
      </div>
      <div class="flex-row">
        <div *ngIf="!editMode" class="mb-3">
          <h3>{{user.name}}</h3>
          <i class="text-muted">
            - {{ user.coffees | level | levelName }}
          </i>
        </div>
        <div *ngIf="editMode" class="mb-3">
          <label  class="form-label" for="name">Name</label>
          <input type="text" id="name"
                    [readonly]="!editMode" [class]=" editMode ? 'form-control' : 'form-control-plaintext h3'"
                    [(ngModel)]="user.name">
        </div>
        <div *ngIf="editMode" class="mb-3">
          <label class="form-label" for="avatar">Avatar</label>
          <div class="input-group">
            <input type="url" class="form-control" id="avatar" [(ngModel)]="user.avatar">
            <button class="btn btn-secondary" ngbTooltip="reset" (click)="user.avatar = ''">
              <i class="bi bi-arrow-counterclockwise"></i>
            </button>
          </div>
          <small class="form-text text-muted">Must be a valid url.</small>
        </div>
        <div *ngIf="editMode" class="d-flex justify-content-end">
          <button class="btn btn-success" (click)="updateUser()"><span></span> save</button>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col">
          <span class="bi-star text-info h2" ngbTooltip="Level"> {{ user.coffees | level }}</span>
          <span class="text-info h5"> / {{user.coffees | nextLevel}}</span>
        </div>
        <div class="col">
          <span class="bi-trophy text-warning h2" ngbTooltip="Trophies"> 12</span>
        </div>
      </div>
      <hr>
      <div class="row">
        <img class="col-3" src="/assets/trophies/nightOwl.svg" alt="Night Owl">
        <img class="col-3" src="/assets/trophies/earlyBird.svg" alt="Early Bird">
        <img class="col-3" src="/assets/trophies/mostAddictedOfThemAll.svg" alt="Most Addicted">
        <img class="col-3" src="/assets/trophies/buyerOfMilk.svg" alt="Buyer of Milk">
        <img class="col-3" src="/assets/trophies/buyerOfNoMilk.svg" alt="Buyer of Non-Milk">
        <img class="col-3" src="/assets/trophies/buyerOfCoffee.svg" alt="Buyer of Coffee">
        <img class="col-3" src="/assets/trophies/1.svg" alt="Level 1">
        <img class="col-3" src="/assets/trophies/2.svg" alt="Level 2">
        <img class="col-3" src="/assets/trophies/3.svg" alt="Level 3">
        <img class="col-3" src="/assets/trophies/4.svg" alt="Level 4">
        <img class="col-3" src="/assets/trophies/5.svg" alt="Level 5">
        <img class="col-3" src="/assets/trophies/6.svg" alt="Level 6">
        <img class="col-3" src="/assets/trophies/7.svg" alt="Level 7">
        <img class="col-3" src="/assets/trophies/8.svg" alt="Level 8">
        <img class="col-3" src="/assets/trophies/9.svg" alt="Level 9">
        <img class="col-3" src="/assets/trophies/10.svg" alt="Level 10">
        <img class="col-3" src="/assets/trophies/11.svg" alt="Level 11">
      </div>
    </div>
    <div class="col">
      <div class="mb-3">
        <label class="form-label fs-5" for="balance">Balance</label>
        <div class="input-group">
          <span class="input-group-text" [class.text-danger]="user.balance">
            {{ user.balance | currency: 'EUR' : 'symbol': '1.': 'de-DE'}}
          </span>
          <input type="number" class="form-control form-control-lg" id="balance" [(ngModel)]="balanceCorrection">
        </div>
      </div>
    </div>
  </div>
</div>
